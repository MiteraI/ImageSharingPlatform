@page
@model ImageSharingPlatform.Pages.ImageRequestMng.ReceivedImageRequestModel
@{
    string ImageSrc(byte[] imageBytes) => imageBytes == null ? "" : $"data:image/jpeg;base64,{Convert.ToBase64String(imageBytes)}";
}

<h2>MY RECEIVED IMAGE REQUEST</h2>
<br />
<div class="card shadow border-0 my-4">
    <div class="card-body p-5">
<table class="table">
    <thead>
        <tr>
            <th>
                Title
            </th>
            <th>
                Description
            </th>
            <th>
                Price
            </th>
            <th>
                Status
            </th>
            <th>
                Create Time
            </th>
            <th>
                Image Blob
            </th>
            <th>
                Requester
            </th>
            <th>
                Artist
            </th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model.ImageRequests)
        {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.Title)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Description)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Price)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RequestStatus)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.CreateTime)
            </td>
            <td>
                @if (item.ImageBlob != null)
                {
                    <img src="@ImageSrc(item.ImageBlob)" width="100" height="100" />
                }
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.RequesterUser.Email)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.Artist.Email)
            </td>
            <td>
                <a asp-page="./Edit" asp-route-id="@item.Id" class="btn btn-primary">Edit</a>
            </td>
        </tr>
        }
    </tbody>
    <div>
        <a asp-page="./Index" class="btn btn-dark">Back to List</a>
    </div>
</table>
</div>
</div>
